<div class="absolute inset-0 overflow-hidden flex flex-col w-full" *transloco="let t">

    <!-- Header -->
    <div class="flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between p-6 sm:py-4 sm:px-10 border-b bg-card dark:bg-transparent">

        <div class="flex-1 min-w-0">
            <au-breadcrumb [data]="breadcrumb"></au-breadcrumb>
            <au-title>
                <mat-icon
                    fontSet="material-symbols-outlined"
                    class="icon-size-8 mr-2"
                >
                    chat_paste_go
                </mat-icon>
                {{ t('queueManager.Queue') }}
            </au-title>
        </div>

        <!-- Actions -->
        <div class="flex flex-shrink-0 items-center mt-6 sm:mt-0 sm:ml-4">
            <button
                *ngIf="currentViewAction.id === 'queueManager::queue.detail.edit'"
                mat-flat-button
                type="submit"
                class="ml-3"
                form="queueManagerQueueFormDetail"
                color="accent"
                [disabled]="fg.pristine || ('queueManager::queue.detail.update' | getSpinnerFlag | async)"
            >
                <mat-icon
                    *ngIf="!('queueManager::queue.detail.update' | getSpinnerFlag | async)"
                    class="icon-size-5 mr-2"
                    svgIcon="heroicons_solid:pencil-alt"
                >
                </mat-icon>
                <mat-icon *ngIf="'queueManager::queue.detail.update' | getSpinnerFlag | async">
                    <mat-spinner diameter="20"></mat-spinner>
                </mat-icon>
                {{ t('Update') }}
            </button>
            <button
                *ngIf="currentViewAction.id === 'queueManager::queue.detail.new'"
                mat-flat-button
                type="submit"
                form="queueManagerQueueFormDetail"
                class="ml-3"
                color="accent"
                [disabled]="fg.pristine || ('queueManager::queue.detail.create' | getSpinnerFlag | async)"
            >
                <mat-icon
                    *ngIf="!('queueManager::queue.detail.create' | getSpinnerFlag | async)"
                    class="icon-size-5 mr-2"
                    svgIcon="heroicons_solid:save"
                >
                </mat-icon>
                <mat-icon *ngIf="'queueManager::queue.detail.create' | getSpinnerFlag | async">
                    <mat-spinner diameter="20"></mat-spinner>
                </mat-icon>
                {{ t('Create') }}
            </button>
        </div>
        <!-- / Actions -->

    </div>
    <!-- / Header -->

    <!-- Main -->
    <div class="flex-auto pt-6 px-6 sm:pt-10 sm:px-10 overflow-y-auto" cdkScrollable>

        <div class="form-card">

            <form
                id="queueManagerQueueFormDetail"
                novalidate
                [formGroup]="fg"
                (ngSubmit)="onSubmit($event)"
            >

                <div class="layout__container">

                    <mat-form-field
                        appearance="outline"
                        class="col-6"
                    >
                        <mat-label>{{ t('queueManager.Prefix') }}</mat-label>
                        <input
                            matInput
                            formControlName="prefix"
                            maxlength="50"
                            required
                        >
                        <mat-error>{{ formErrors?.prefix | async }}</mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-6"
                    >
                        <mat-label>{{ t('queueManager.Name') }}</mat-label>
                        <input
                            matInput
                            formControlName="name"
                            maxlength="50"
                            required
                        >
                        <mat-error>{{ formErrors?.name | async }}</mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-2"
                    >
                        <mat-label>{{ t('queueManager.WaitingJobs') }}</mat-label>
                        <input
                            matInput
                            formControlName="waitingJobs"
                            type="number"
                            maxlength="10"
                        >
                        <mat-error>{{ formErrors?.waitingJobs | async }}</mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-2"
                    >
                        <mat-label>{{ t('queueManager.ActiveJobs') }}</mat-label>
                        <input
                            matInput
                            formControlName="activeJobs"
                            type="number"
                            maxlength="10"
                        >
                        <mat-error>{{ formErrors?.activeJobs | async }}</mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-2"
                    >
                        <mat-label>{{ t('queueManager.CompletedJobs') }}</mat-label>
                        <input
                            matInput
                            formControlName="completedJobs"
                            type="number"
                            maxlength="10"
                        >
                        <mat-error>{{ formErrors?.completedJobs | async }}</mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-2"
                    >
                        <mat-label>{{ t('queueManager.FailedJobs') }}</mat-label>
                        <input
                            matInput
                            formControlName="failedJobs"
                            type="number"
                            maxlength="10"
                        >
                        <mat-error>{{ formErrors?.failedJobs | async }}</mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-2"
                    >
                        <mat-label>{{ t('queueManager.DelayedJobs') }}</mat-label>
                        <input
                            matInput
                            formControlName="delayedJobs"
                            type="number"
                            maxlength="10"
                        >
                        <mat-error>{{ formErrors?.delayedJobs | async }}</mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-2"
                    >
                        <mat-label>{{ t('queueManager.PausedJobs') }}</mat-label>
                        <input
                            matInput
                            formControlName="pausedJobs"
                            type="number"
                            maxlength="10"
                        >
                        <mat-error>{{ formErrors?.pausedJobs | async }}</mat-error>
                    </mat-form-field>

                    <!-- Grid -->
                    <div class="relative col-12">
                        <p class="absolute top-0 -left-1 bg-white px-2 pt-1 origin-center -translate-y-1/2 scale-75 text-base z-999 pointer-events-none">
                            <span class="opacity-60">{{ t('queueManager.Jobs') }}</span>
                        </p>
                        <div class="rounded-md border hover:border-2 focus-within:border-2 p-0.5 hover:p-px focus-within:p-px transition-all">
                            <!-- main -->
                            <div
                                class="flex flex-auto pt-0 px-2 overflow-y-auto"
                                cdkScrollable
                            >
                                <au-grid
                                    [columnsConfig]="jobsColumnsConfig$ | async"
                                    [gridData]="jobsGridData$ | async"
                                    [gridState]="jobsGridState"
                                    [id]="jobsGridId"
                                    [originColumnsConfig]="jobsOriginColumnsConfig"
                                >
                                    <au-grid-translations
                                        [actions]="t('Actions')"
                                        [AND]="t('AND')"
                                        [clearFilters]="t('ClearFilters')"
                                        [clickAndDragInfo]="t('ClickAndDragInfo')"
                                        [columns]="t('Columns')"
                                        [field]="t('Field')"
                                        [filter]="t('Filter')"
                                        [for]="gridId"
                                        [operator]="t('Operator')"
                                        [OR]="t('OR')"
                                        [pleaseSelectField]="t('PleaseSelectField')"
                                        [resetColumnsConfig]="t('ResetColumnsConfig')"
                                        [translations]="t('Translations')"
                                        [value]="t('Value')"
                                        [paginator]="{
                                            firstPageLabel: t('Paginator.FirstPageLabel'),
                                            itemsPerPageLabel: t('Paginator.ItemsPerPageLabel'),
                                            lastPageLabel: t('Paginator.LastPageLabel'),
                                            nextPageLabel: t('Paginator.NextPageLabel'),
                                            ofLabel: t('Paginator.OfLabel'),
                                            previousPageLabel: t('Paginator.PreviousPageLabel')
                                        }"
                                        [operators]="{
                                            contains: t('Operators.Contains'),
                                            endsWith: t('Operators.EndsWith'),
                                            equals: t('Operators.Equals'),
                                            greaterThan: t('Operators.GreaterThan'),
                                            greaterThanEqual: t('Operators.GreaterThanEqual'),
                                            lessThan: t('Operators.LessThan'),
                                            lessThanEqual: t('Operators.LessThanEqual'),
                                            notEquals: t('Operators.NotEquals'),
                                            startsWith: t('Operators.StartsWith')
                                        }"
                                        [actionsMenu]="{
                                            edit: t('Edit'),
                                            delete: t('Delete')
                                        }"
                                    >
                                        <au-grid-column-translation
                                            *ngFor="let columnConfig of originColumnsConfig"
                                            [field]="columnConfig.field"
                                        >
                                            {{ t(columnConfig.translation ? columnConfig.translation : columnConfig.field.toPascalCase()) }}
                                        </au-grid-column-translation>
                                    </au-grid-translations>
                                </au-grid>
                                <!-- / Grid -->
                            </div>
                        <!-- / main -->
                        </div>
                    </div>

                </div>

            </form>

        </div>

    </div>
    <!-- / Main -->

</div>
