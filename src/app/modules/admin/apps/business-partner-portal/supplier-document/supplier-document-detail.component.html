<!--
  @aurora-generated
  @source cliter/business-partner-portal/supplier-document.aurora.yaml
-->
<div
    *transloco="let t"
    class="absolute inset-0 flex w-full flex-col overflow-hidden"
>
    <!-- Header -->
    <div
        class="bg-card flex flex-0 flex-col border-b p-6 sm:flex-row sm:items-center sm:justify-between sm:px-10 sm:py-4 dark:bg-transparent"
    >
        <div class="min-w-0 flex-1">
            <au-breadcrumb [data]="breadcrumb"></au-breadcrumb>
            <au-title>
                <mat-icon
                    class="mr-2 icon-size-8"
                    svgIcon="mat_solid:cloud_upload"
                ></mat-icon>
                {{ t('businessPartnerPortal.SupplierDocument') }}
            </au-title>
        </div>

        <!-- Actions -->
        <div class="mt-6 flex flex-shrink-0 items-center sm:ml-4 sm:mt-0">
            @if (
                currentViewAction.id ===
                'businessPartnerPortal::supplierDocument.detail.edit'
            ) {
                <button
                    type="submit"
                    class="ml-3"
                    [disabled]="
                        fg.pristine ||
                        ('businessPartnerPortal::supplierDocument.detail.update'
                            | getActionStatus
                            | async)
                    "
                    mat-flat-button
                    form="businessPartnerPortalSupplierDocumentFormDetail"
                    color="accent"
                >
                    @if (
                        'businessPartnerPortal::supplierDocument.detail.update'
                            | getActionStatus
                            | async
                    ) {
                        <mat-icon>
                            <mat-spinner diameter="20"></mat-spinner>
                        </mat-icon>
                    } @else {
                        <mat-icon
                            class="mr-2 icon-size-5"
                            svgIcon="mat_solid:edit"
                        ></mat-icon>
                    }
                    {{ t('Update') }}
                </button>
            }

            @if (
                currentViewAction.id ===
                'businessPartnerPortal::supplierDocument.detail.new'
            ) {
                <button
                    type="submit"
                    class="ml-3"
                    [disabled]="
                        fg.pristine ||
                        ('businessPartnerPortal::supplierDocument.detail.create'
                            | getActionStatus
                            | async)
                    "
                    mat-flat-button
                    form="businessPartnerPortalSupplierDocumentFormDetail"
                    color="accent"
                >
                    @if (
                        'businessPartnerPortal::supplierDocument.detail.create'
                            | getActionStatus
                            | async
                    ) {
                        <mat-icon>
                            <mat-spinner diameter="20"></mat-spinner>
                        </mat-icon>
                    } @else {
                        <mat-icon
                            class="mr-2 icon-size-5"
                            svgIcon="mat_solid:save"
                        ></mat-icon>
                    }
                    {{ t('Create') }}
                </button>
            }
        </div>
        <!-- / Actions -->
    </div>
    <!-- / Header -->

    <!-- Main -->
    <div
        class="flex-auto overflow-y-auto px-6 pt-6 sm:px-10 sm:pt-10"
        cdkScrollable
    >
        <div class="form-card">
            <form
                id="businessPartnerPortalSupplierDocumentFormDetail"
                [formGroup]="fg"
                novalidate
                (ngSubmit)="onSubmit($event)"
            >
                <div class="layout__container">
                    <mat-form-field
                        appearance="outline"
                        class="col-6"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.BusinessPartnerId') }}
                        </mat-label>
                        <mat-select formControlName="businessPartnerId">
                            @for (
                                businessPartner of businessPartners$ | async;
                                track businessPartner.id
                            ) {
                                <mat-option [value]="businessPartner.id">
                                    {{ businessPartner.name }}
                                </mat-option>
                            }
                        </mat-select>
                        <mat-error>
                            {{ formErrors?.businessPartnerId | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-8"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.DocumentNumber') }}
                        </mat-label>
                        <input
                            matInput
                            formControlName="documentNumber"
                            maxlength="64"
                        />
                        <mat-error>
                            {{ formErrors?.documentNumber | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-4"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.DocumentType') }}
                        </mat-label>
                        <mat-select formControlName="documentType">
                            <mat-option value="INVOICE">INVOICE</mat-option>
                            <mat-option value="CREDIT_NOTE">
                                CREDIT_NOTE
                            </mat-option>
                            <mat-option value="DEBIT_NOTE">
                                DEBIT_NOTE
                            </mat-option>
                            <mat-option value="PROFORMA">PROFORMA</mat-option>
                            <mat-option value="OTHER">OTHER</mat-option>
                        </mat-select>
                        <mat-error>
                            {{ formErrors?.documentType | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-4"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.Status') }}
                        </mat-label>
                        <mat-select formControlName="status">
                            <mat-option value="PENDING_UPLOAD">
                                PENDING_UPLOAD
                            </mat-option>
                            <mat-option value="UPLOADED">UPLOADED</mat-option>
                            <mat-option value="VALIDATING">
                                VALIDATING
                            </mat-option>
                            <mat-option value="SENT_FOR_PROCESSING">
                                SENT_FOR_PROCESSING
                            </mat-option>
                            <mat-option value="PROCESSING">
                                PROCESSING
                            </mat-option>
                            <mat-option value="PROCESSED">PROCESSED</mat-option>
                            <mat-option value="LINKED">LINKED</mat-option>
                            <mat-option value="ERROR">ERROR</mat-option>
                            <mat-option value="REJECTED">REJECTED</mat-option>
                        </mat-select>
                        <mat-error>{{ formErrors?.status | async }}</mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-8"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.FileHash') }}
                        </mat-label>
                        <input
                            matInput
                            formControlName="fileHash"
                            maxlength="64"
                        />
                        <mat-error>
                            {{ formErrors?.fileHash | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-8"
                    >
                        <mat-label>
                            {{
                                t('businessPartnerPortal.SupplierInvoiceNumber')
                            }}
                        </mat-label>
                        <input
                            matInput
                            formControlName="supplierInvoiceNumber"
                            maxlength="64"
                        />
                        <mat-error>
                            {{ formErrors?.supplierInvoiceNumber | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="au-datepicker col-4"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.SupplierInvoiceDate') }}
                        </mat-label>
                        <input
                            [auDatepickerSqlFormat]
                            [matDatepicker]="supplierInvoiceDatePicker"
                            matInput
                            autocomplete="off"
                            formControlName="supplierInvoiceDate"
                        />
                        <mat-datepicker-toggle
                            [for]="supplierInvoiceDatePicker"
                            matSuffix
                        ></mat-datepicker-toggle>
                        <mat-datepicker
                            #supplierInvoiceDatePicker
                        ></mat-datepicker>
                        <mat-error>
                            {{ formErrors?.supplierInvoiceDate | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-4"
                    >
                        <mat-label>
                            {{
                                t('businessPartnerPortal.SupplierInvoiceAmount')
                            }}
                        </mat-label>
                        <input
                            type="number"
                            matInput
                            formControlName="supplierInvoiceAmount"
                        />
                        <mat-error>
                            {{ formErrors?.supplierInvoiceAmount | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-2"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.CurrencyCode') }}
                        </mat-label>
                        <input
                            matInput
                            formControlName="currencyCode"
                            maxlength="3"
                        />
                        <mat-error>
                            {{ formErrors?.currencyCode | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-8"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.ExternalDocumentId') }}
                        </mat-label>
                        <input
                            matInput
                            formControlName="externalDocumentId"
                            maxlength="64"
                        />
                        <mat-error>
                            {{ formErrors?.externalDocumentId | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-4"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.ExternalCompanyCode') }}
                        </mat-label>
                        <input
                            matInput
                            formControlName="externalCompanyCode"
                            maxlength="16"
                        />
                        <mat-error>
                            {{ formErrors?.externalCompanyCode | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-8"
                    >
                        <mat-label>
                            {{
                                t(
                                    'businessPartnerPortal.ExternalProcessingStatus'
                                )
                            }}
                        </mat-label>
                        <input
                            matInput
                            formControlName="externalProcessingStatus"
                            maxlength="64"
                        />
                        <mat-error>
                            {{ formErrors?.externalProcessingStatus | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-6"
                    >
                        <mat-label>
                            {{
                                t(
                                    'businessPartnerPortal.PurchaseInvoiceHeaderId'
                                )
                            }}
                        </mat-label>
                        <mat-select formControlName="purchaseInvoiceHeaderId">
                            @for (
                                purchaseInvoiceHeader of purchaseInvoiceHeaders$
                                    | async;
                                track purchaseInvoiceHeader.id
                            ) {
                                <mat-option [value]="purchaseInvoiceHeader.id">
                                    {{ purchaseInvoiceHeader.name }}
                                </mat-option>
                            }
                        </mat-select>
                        <mat-error>
                            {{ formErrors?.purchaseInvoiceHeaderId | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-2"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.OcrConfidenceScore') }}
                        </mat-label>
                        <input
                            type="number"
                            matInput
                            formControlName="ocrConfidenceScore"
                        />
                        <mat-error>
                            {{ formErrors?.ocrConfidenceScore | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="au-datepicker col-4"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.SentForProcessingAt') }}
                        </mat-label>
                        <input
                            [mtxDatetimepicker]="sentForProcessingAtPicker"
                            matInput
                            formControlName="sentForProcessingAt"
                            auDatetimepickerSqlFormat
                        />
                        <mtx-datetimepicker-toggle
                            [for]="sentForProcessingAtPicker"
                            matSuffix
                        ></mtx-datetimepicker-toggle>
                        <mtx-datetimepicker
                            #sentForProcessingAtPicker
                            type="datetime"
                            [multiYearSelector]="false"
                            [twelvehour]="false"
                            [timeInterval]="1"
                            [touchUi]="false"
                            mode="landscape"
                            startView="month"
                        ></mtx-datetimepicker>
                        <mat-error>
                            {{ formErrors?.sentForProcessingAt | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="au-datepicker col-4"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.ProcessedAt') }}
                        </mat-label>
                        <input
                            [mtxDatetimepicker]="processedAtPicker"
                            matInput
                            formControlName="processedAt"
                            auDatetimepickerSqlFormat
                        />
                        <mtx-datetimepicker-toggle
                            [for]="processedAtPicker"
                            matSuffix
                        ></mtx-datetimepicker-toggle>
                        <mtx-datetimepicker
                            #processedAtPicker
                            type="datetime"
                            [multiYearSelector]="false"
                            [twelvehour]="false"
                            [timeInterval]="1"
                            [touchUi]="false"
                            mode="landscape"
                            startView="month"
                        ></mtx-datetimepicker>
                        <mat-error>
                            {{ formErrors?.processedAt | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="au-datepicker col-4"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.LinkedAt') }}
                        </mat-label>
                        <input
                            [mtxDatetimepicker]="linkedAtPicker"
                            matInput
                            formControlName="linkedAt"
                            auDatetimepickerSqlFormat
                        />
                        <mtx-datetimepicker-toggle
                            [for]="linkedAtPicker"
                            matSuffix
                        ></mtx-datetimepicker-toggle>
                        <mtx-datetimepicker
                            #linkedAtPicker
                            type="datetime"
                            [multiYearSelector]="false"
                            [twelvehour]="false"
                            [timeInterval]="1"
                            [touchUi]="false"
                            mode="landscape"
                            startView="month"
                        ></mtx-datetimepicker>
                        <mat-error>
                            {{ formErrors?.linkedAt | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-8"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.ErrorCode') }}
                        </mat-label>
                        <input
                            matInput
                            formControlName="errorCode"
                            maxlength="64"
                        />
                        <mat-error>
                            {{ formErrors?.errorCode | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-12"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.ErrorMessage') }}
                        </mat-label>
                        <textarea
                            matInput
                            formControlName="errorMessage"
                        ></textarea>
                        <mat-error>
                            {{ formErrors?.errorMessage | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-12"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.RetryCount') }}
                        </mat-label>
                        <input
                            type="number"
                            matInput
                            formControlName="retryCount"
                        />
                        <mat-error>
                            {{ formErrors?.retryCount | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="au-datepicker col-4"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.LastRetryAt') }}
                        </mat-label>
                        <input
                            [mtxDatetimepicker]="lastRetryAtPicker"
                            matInput
                            formControlName="lastRetryAt"
                            auDatetimepickerSqlFormat
                        />
                        <mtx-datetimepicker-toggle
                            [for]="lastRetryAtPicker"
                            matSuffix
                        ></mtx-datetimepicker-toggle>
                        <mtx-datetimepicker
                            #lastRetryAtPicker
                            type="datetime"
                            [multiYearSelector]="false"
                            [twelvehour]="false"
                            [timeInterval]="1"
                            [touchUi]="false"
                            mode="landscape"
                            startView="month"
                        ></mtx-datetimepicker>
                        <mat-error>
                            {{ formErrors?.lastRetryAt | async }}
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-12"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.Notes') }}
                        </mat-label>
                        <textarea
                            matInput
                            formControlName="notes"
                        ></textarea>
                        <mat-error>{{ formErrors?.notes | async }}</mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        class="col-12"
                    >
                        <mat-label>
                            {{ t('businessPartnerPortal.SupplierNotes') }}
                        </mat-label>
                        <textarea
                            matInput
                            formControlName="supplierNotes"
                        ></textarea>
                        <mat-error>
                            {{ formErrors?.supplierNotes | async }}
                        </mat-error>
                    </mat-form-field>
                    <div class="col-4 pt-5">
                        <mat-checkbox formControlName="isArchived">
                            {{ t('businessPartnerPortal.IsArchived') }}
                        </mat-checkbox>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- / Main -->
</div>
